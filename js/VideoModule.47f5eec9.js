(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["VideoModule"],{1113:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("video-drawer"),r("v-content",[Object.keys(t.videostreams).length?t._e():r("v-container",[r("v-card",{staticClass:"mx-auto mt-2"},[r("v-alert",{attrs:{border:"left",type:"info"}},[r("span",[t._v("No Video Streams are defined. Please define a video stream in "),r("v-btn",{staticClass:"ma-2",attrs:{color:t.navColor+" darken-2",small:"",to:"/config/video"}},[t._v("Config->Video")])],1)])],1)],1),Object.keys(t.enabledStreams).length?t._e():r("v-container",[r("v-card",{staticClass:"mx-auto mt-2"},[r("v-alert",{attrs:{border:"left",type:"info"}},[r("span",[t._v("There are no enabled Video Streams. Please enable a stream in "),r("v-btn",{staticClass:"ma-2",attrs:{color:t.navColor+" darken-2",small:""},on:{click:function(e){return e.stopPropagation(),t.toggleDrawer(e)}}},[t._v("Stream Control")])],1)])],1)],1),r("v-container",{staticClass:"pa-2",attrs:{fluid:""}},[r("v-row",{attrs:{dense:""}},t._l(t.videostreams,(function(e){return e.enabled?r("v-col",{key:e.key,staticClass:"px-4",attrs:{xs:"12",sm:"12",md:"12",lg:"6",xl:"6"}},[r("v-row",{ref:"layout-"+e.key,refInFor:!0,attrs:{justify:"center",wrap:""}},[r("v-card",[r("v-system-bar",{attrs:{color:t.navColor,window:""}},[r("span",[t._v("Video Stream: "+t._s(e.name))])]),r("v-card-text",["playing"==t.streamStatus[e.key]?r("v-chip",{staticClass:"ma-2",attrs:{color:"green"}},[r("v-icon",{attrs:{left:""}},[t._v("mdi-check-circle")]),r("span",[t._v("Playing")])],1):"buffering"==t.streamStatus[e.key]||"stop"==e.action?r("v-chip",{staticClass:"ma-2",attrs:{color:"amber"}},[r("v-icon",{attrs:{left:""}},[t._v("mdi-alert")]),r("span",[t._v("Buffering")])],1):r("v-chip",{staticClass:"ma-2",attrs:{color:"red"}},[r("v-icon",{attrs:{left:""}},[t._v("mdi-alert-circle")]),r("span",[t._v("Stopped")])],1),r("span",[t._v("Bitrate"),r("v-chip",{staticClass:"ma-2",attrs:{color:"blue"}},[r("strong",[t._v(t._s(t.cleanBitrate(t.statBitrate[e.key])))])])],1),r("span",[t._v("Packet Loss"),r("v-chip",{staticClass:"ma-2",attrs:{color:"red"}},[r("strong",[t._v(t._s(t.statPacketloss[e.key]))])])],1)],1),r("VideoStream",{attrs:{config:{url:e.webrtcEndpoint},videostream:e.key,width:t.refWidth("layout-"+e.key),stream:1,action:e.action},on:{status:function(r){return t.updateStatus(e.key,r)},packetloss:function(r){return t.updatePacketloss(e.key,r)},bitrate:function(r){return t.updateBitrate(e.key,r)}}})],1)],1)],1):t._e()})),1)],1)],1)],1)},n=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-navigation-drawer",{attrs:{app:"",left:"",clipped:"",floating:"",color:t.navColor+" darken-4"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-list-item",{staticClass:"mt-4"},[r("v-list-item-content",[r("v-list-item-title",{staticClass:"title"},[r("v-row",[r("v-col",[r("span",[t._v("Video Streams")])]),r("v-col",[r("v-btn",{attrs:{to:"/config/video",color:t.navColor+" darken-2",small:""}},[r("v-icon",[t._v("mdi-cog-outline")])],1)],1)],1)],1),r("v-list-item-subtitle",[r("span",[t._v("Stream Control")])])],1)],1),r("v-divider"),Object.keys(t.videostreams).length?r("v-list",{attrs:{flat:"","three-line":""}},t._l(t.videostreams,(function(e){return r("v-list-item",{key:e.key,scopedSlots:t._u([{key:"default",fn:function(a){a.active;return[r("v-list-item-action",[r("v-switch",{attrs:{color:"green"},model:{value:e.enabled,callback:function(r){t.$set(e,"enabled",r)},expression:"stream.enabled"}})],1),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(e.name))]),r("v-list-item-subtitle",[t._v(t._s(e.webrtcEndpoint))])],1)]}}],null,!0)})})),1):r("v-list",[r("v-list-item",[r("v-list-item-content",[r("v-alert",{attrs:{outlined:"",type:"info"}},[r("span",[t._v("No Video Streams are defined. Please define a video stream in "),r("v-btn",{staticClass:"ma-2",attrs:{color:t.navColor,small:"",to:"/config/video"}},[t._v("Config->Video")])],1)])],1)],1)],1)],1)},i=[],o={name:"VideoDrawer",data:function(){return{}},computed:{drawer:{get:function(){return this.$store.state.core.navDrawer},set:function(t){this.$store.commit("core/setNavDrawer",t)}},videostreams:function(){return this.$store.state.data.videostreams}},mounted:function(){}},c=o,p=r("2877"),u=r("6544"),l=r.n(u),d=r("0798"),m=r("8336"),f=r("62ad"),v=r("ce7e"),h=r("132d"),g=r("8860"),b=r("da13"),y=r("1800"),P=r("5d23"),w=r("f774"),k=r("0fd9"),x=r("b73d"),S=Object(p["a"])(c,s,i,!1,null,null,null),I=S.exports;l()(S,{VAlert:d["a"],VBtn:m["a"],VCol:f["a"],VDivider:v["a"],VIcon:h["a"],VList:g["a"],VListItem:b["a"],VListItemAction:y["a"],VListItemContent:P["a"],VListItemSubtitle:P["b"],VListItemTitle:P["c"],VNavigationDrawer:w["a"],VRow:k["a"],VSwitch:x["a"]});var C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("video",{staticClass:"ma2 pa0",attrs:{id:t.videostream,controls:"",autoPictureInPicture:"",muted:"",preload:"none",poster:"/img/placeholders/video-placeholder.png",width:t.width},domProps:{muted:!0}})},V=[],T=(r("99af"),r("7db0"),r("4160"),r("a9e3"),r("159b"),r("a811")),_={props:{config:{type:Object,default:null},stream:{type:Number,default:null},width:{type:Number,default:500},videostream:{type:String,default:null},action:{type:String,default:null}},data:function(){return{lastStats:null,streaming:null}},watch:{action:{handler:function(t){this.logDebug("action: ".concat(t,", ").concat(this.action)),"start"==this.action?this.streaming.start():"pause"==this.action?this.stremaing.pause():"stop"==this.action&&this.streaming.stop()}}},beforeDestroy:function(){clearInterval(this.bitrateInterval),clearInterval(this.bufferingInterval)},mounted:function(){var t=this,e=this.janus=new T["Janus"](this.config,console);this.streaming=new T["StreamingJanusPlugin"](console,!1);var r=new RTCPeerConnection,a=0,n=0;this.bitrateInterval=setInterval((function(){var e=r.getReceivers().find((function(t){var e=t.kind;return"video"==e}));r.getStats(e).then((function(e){return e.forEach((function(e){"inbound-rtp"==e.type&&(t.lastStats&&(n=e.packetsLost,a=(e.bytesReceived-t.lastStats.bytesReceived)/(e.lastPacketReceivedTimestamp-t.lastStats.lastPacketReceivedTimestamp)),t.lastStats=e)}))})),t.$emit("bitrate",a),t.$emit("packetloss",n)}),1e3),this.$emit("status","init"),e.connect().then((function(){return e.addPlugin(t.streaming)})).then((function(){return r.onicecandidate=function(e){e.candidate&&e.candidate.candidate?t.streaming.candidate({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex}):t.streaming.candidate({completed:!0})},r.onaddstream=function(e){var r=document.getElementById(t.videostream);if(r.srcObject=e.stream,r.play(),void 0==t.bufferingInterval){var a=0;t.bufferintInterval=setInterval((function(){a!=r.currentTime||r.paused?t.$emit("status","playing"):t.$emit("status","buffering"),a=r.currentTime}),500)}},t.streaming.on("statusChange",(function(e){t.$emit("status",e)})),t.streaming.watch(t.stream)})).then((function(t){return r.setRemoteDescription(new RTCSessionDescription(t))})).then((function(){return r.createAnswer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})})).then((function(e){return r.setLocalDescription(e),t.streaming.start(e)})).then((function(t){t.body,t.json}))},methods:{}},E=_,L=Object(p["a"])(E,C,V,!1,null,null,null),M=L.exports,R={name:"VideoModule",components:{VideoDrawer:I,VideoStream:M},data:function(){return{actionState:"start",streamStatus:{nano:null,raspberry:null},statBitrate:{nano:null,raspberry:null},statPacketloss:{nano:null,raspberry:null},bitrate:"256",resolution:"720p",activeStream:null,width:500}},computed:{videostreams:function(){return this.$store.state.data.videostreams},enabledStreams:function(){var t={};for(var e in this.videostreams)this.videostreams[e].enabled&&(t[this.videostreams[e].key]=this.videostreams[e]);return t}},watch:{},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.width=.75*window.innerWidth}))},methods:{updateStatus:function(t,e){this.streamStatus.hasOwnProperty(t)?this.streamStatus[t]=e:this.$set(this.streamStatus,t,e)},updateBitrate:function(t,e){this.statBitrate.hasOwnProperty(t)?this.statBitrate[t]=e:this.$set(this.statBitrate,t,e)},updatePacketloss:function(t,e){this.statPacketloss.hasOwnProperty(t)?this.statPacketloss[t]=e:this.$set(this.statPacketloss,t,e)},changeStream:function(t){this.activeStream=t},cleanBitrate:function(t){return t/1e3<1e3?Math.round(t/1e3)+" K":Math.round(t/1e6)+" M"},refWidth:function(t){var e=null;try{e=this.$refs[t][0].clientWidth}catch(r){}return e},toggleDrawer:function(){this.$store.commit("core/setNavDrawer",!0)}}},D=R,O=r("b0af"),F=r("99d9"),j=r("cc20"),N=r("a523"),$=r("a75b"),B=r("afd9"),A=Object(p["a"])(D,a,n,!1,null,"78deaec3",null);e["default"]=A.exports;l()(A,{VAlert:d["a"],VBtn:m["a"],VCard:O["a"],VCardText:F["b"],VChip:j["a"],VCol:f["a"],VContainer:N["a"],VContent:$["a"],VIcon:h["a"],VRow:k["a"],VSystemBar:B["a"]})},"282b":function(t,e,r){"use strict";var a={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};a.localCName=a.generateIdentifier(),a.splitLines=function(t){return t.trim().split("\n").map((function(t){return t.trim()}))},a.splitSections=function(t){var e=t.split("\nm=");return e.map((function(t,e){return(e>0?"m="+t:t).trim()+"\r\n"}))},a.getDescription=function(t){var e=a.splitSections(t);return e&&e[0]},a.getMediaSections=function(t){var e=a.splitSections(t);return e.shift(),e},a.matchPrefix=function(t,e){return a.splitLines(t).filter((function(t){return 0===t.indexOf(e)}))},a.parseCandidate=function(t){var e;e=0===t.indexOf("a=candidate:")?t.substring(12).split(" "):t.substring(10).split(" ");for(var r={foundation:e[0],component:parseInt(e[1],10),protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]},a=8;a<e.length;a+=2)switch(e[a]){case"raddr":r.relatedAddress=e[a+1];break;case"rport":r.relatedPort=parseInt(e[a+1],10);break;case"tcptype":r.tcpType=e[a+1];break;case"ufrag":r.ufrag=e[a+1],r.usernameFragment=e[a+1];break;default:r[e[a]]=e[a+1];break}return r},a.writeCandidate=function(t){var e=[];e.push(t.foundation),e.push(t.component),e.push(t.protocol.toUpperCase()),e.push(t.priority),e.push(t.address||t.ip),e.push(t.port);var r=t.type;return e.push("typ"),e.push(r),"host"!==r&&t.relatedAddress&&t.relatedPort&&(e.push("raddr"),e.push(t.relatedAddress),e.push("rport"),e.push(t.relatedPort)),t.tcpType&&"tcp"===t.protocol.toLowerCase()&&(e.push("tcptype"),e.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(e.push("ufrag"),e.push(t.usernameFragment||t.ufrag)),"candidate:"+e.join(" ")},a.parseIceOptions=function(t){return t.substr(14).split(" ")},a.parseRtpMap=function(t){var e=t.substr(9).split(" "),r={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),r.name=e[0],r.clockRate=parseInt(e[1],10),r.channels=3===e.length?parseInt(e[2],10):1,r.numChannels=r.channels,r},a.writeRtpMap=function(t){var e=t.payloadType;void 0!==t.preferredPayloadType&&(e=t.preferredPayloadType);var r=t.channels||t.numChannels||1;return"a=rtpmap:"+e+" "+t.name+"/"+t.clockRate+(1!==r?"/"+r:"")+"\r\n"},a.parseExtmap=function(t){var e=t.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},a.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&"sendrecv"!==t.direction?"/"+t.direction:"")+" "+t.uri+"\r\n"},a.parseFmtp=function(t){for(var e,r={},a=t.substr(t.indexOf(" ")+1).split(";"),n=0;n<a.length;n++)e=a[n].trim().split("="),r[e[0].trim()]=e[1];return r},a.writeFmtp=function(t){var e="",r=t.payloadType;if(void 0!==t.preferredPayloadType&&(r=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){var a=[];Object.keys(t.parameters).forEach((function(e){t.parameters[e]?a.push(e+"="+t.parameters[e]):a.push(e)})),e+="a=fmtp:"+r+" "+a.join(";")+"\r\n"}return e},a.parseRtcpFb=function(t){var e=t.substr(t.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},a.writeRtcpFb=function(t){var e="",r=t.payloadType;return void 0!==t.preferredPayloadType&&(r=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach((function(t){e+="a=rtcp-fb:"+r+" "+t.type+(t.parameter&&t.parameter.length?" "+t.parameter:"")+"\r\n"})),e},a.parseSsrcMedia=function(t){var e=t.indexOf(" "),r={ssrc:parseInt(t.substr(7,e-7),10)},a=t.indexOf(":",e);return a>-1?(r.attribute=t.substr(e+1,a-e-1),r.value=t.substr(a+1)):r.attribute=t.substr(e+1),r},a.parseSsrcGroup=function(t){var e=t.substr(13).split(" ");return{semantics:e.shift(),ssrcs:e.map((function(t){return parseInt(t,10)}))}},a.getMid=function(t){var e=a.matchPrefix(t,"a=mid:")[0];if(e)return e.substr(6)},a.parseFingerprint=function(t){var e=t.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},a.getDtlsParameters=function(t,e){var r=a.matchPrefix(t+e,"a=fingerprint:");return{role:"auto",fingerprints:r.map(a.parseFingerprint)}},a.writeDtlsParameters=function(t,e){var r="a=setup:"+e+"\r\n";return t.fingerprints.forEach((function(t){r+="a=fingerprint:"+t.algorithm+" "+t.value+"\r\n"})),r},a.parseCryptoLine=function(t){var e=t.substr(9).split(" ");return{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}},a.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+("object"===typeof t.keyParams?a.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+"\r\n"},a.parseCryptoKeyParams=function(t){if(0!==t.indexOf("inline:"))return null;var e=t.substr(7).split("|");return{keyMethod:"inline",keySalt:e[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}},a.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},a.getCryptoParameters=function(t,e){var r=a.matchPrefix(t+e,"a=crypto:");return r.map(a.parseCryptoLine)},a.getIceParameters=function(t,e){var r=a.matchPrefix(t+e,"a=ice-ufrag:")[0],n=a.matchPrefix(t+e,"a=ice-pwd:")[0];return r&&n?{usernameFragment:r.substr(12),password:n.substr(10)}:null},a.writeIceParameters=function(t){return"a=ice-ufrag:"+t.usernameFragment+"\r\na=ice-pwd:"+t.password+"\r\n"},a.parseRtpParameters=function(t){for(var e={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=a.splitLines(t),n=r[0].split(" "),s=3;s<n.length;s++){var i=n[s],o=a.matchPrefix(t,"a=rtpmap:"+i+" ")[0];if(o){var c=a.parseRtpMap(o),p=a.matchPrefix(t,"a=fmtp:"+i+" ");switch(c.parameters=p.length?a.parseFmtp(p[0]):{},c.rtcpFeedback=a.matchPrefix(t,"a=rtcp-fb:"+i+" ").map(a.parseRtcpFb),e.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":e.fecMechanisms.push(c.name.toUpperCase());break;default:break}}}return a.matchPrefix(t,"a=extmap:").forEach((function(t){e.headerExtensions.push(a.parseExtmap(t))})),e},a.writeRtpDescription=function(t,e){var r="";r+="m="+t+" ",r+=e.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=e.codecs.map((function(t){return void 0!==t.preferredPayloadType?t.preferredPayloadType:t.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",e.codecs.forEach((function(t){r+=a.writeRtpMap(t),r+=a.writeFmtp(t),r+=a.writeRtcpFb(t)}));var n=0;return e.codecs.forEach((function(t){t.maxptime>n&&(n=t.maxptime)})),n>0&&(r+="a=maxptime:"+n+"\r\n"),r+="a=rtcp-mux\r\n",e.headerExtensions&&e.headerExtensions.forEach((function(t){r+=a.writeExtmap(t)})),r},a.parseRtpEncodingParameters=function(t){var e,r=[],n=a.parseRtpParameters(t),s=-1!==n.fecMechanisms.indexOf("RED"),i=-1!==n.fecMechanisms.indexOf("ULPFEC"),o=a.matchPrefix(t,"a=ssrc:").map((function(t){return a.parseSsrcMedia(t)})).filter((function(t){return"cname"===t.attribute})),c=o.length>0&&o[0].ssrc,p=a.matchPrefix(t,"a=ssrc-group:FID").map((function(t){var e=t.substr(17).split(" ");return e.map((function(t){return parseInt(t,10)}))}));p.length>0&&p[0].length>1&&p[0][0]===c&&(e=p[0][1]),n.codecs.forEach((function(t){if("RTX"===t.name.toUpperCase()&&t.parameters.apt){var a={ssrc:c,codecPayloadType:parseInt(t.parameters.apt,10)};c&&e&&(a.rtx={ssrc:e}),r.push(a),s&&(a=JSON.parse(JSON.stringify(a)),a.fec={ssrc:c,mechanism:i?"red+ulpfec":"red"},r.push(a))}})),0===r.length&&c&&r.push({ssrc:c});var u=a.matchPrefix(t,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(t){t.maxBitrate=u}))),r},a.parseRtcpParameters=function(t){var e={},r=a.matchPrefix(t,"a=ssrc:").map((function(t){return a.parseSsrcMedia(t)})).filter((function(t){return"cname"===t.attribute}))[0];r&&(e.cname=r.value,e.ssrc=r.ssrc);var n=a.matchPrefix(t,"a=rtcp-rsize");e.reducedSize=n.length>0,e.compound=0===n.length;var s=a.matchPrefix(t,"a=rtcp-mux");return e.mux=s.length>0,e},a.parseMsid=function(t){var e,r=a.matchPrefix(t,"a=msid:");if(1===r.length)return e=r[0].substr(7).split(" "),{stream:e[0],track:e[1]};var n=a.matchPrefix(t,"a=ssrc:").map((function(t){return a.parseSsrcMedia(t)})).filter((function(t){return"msid"===t.attribute}));return n.length>0?(e=n[0].value.split(" "),{stream:e[0],track:e[1]}):void 0},a.parseSctpDescription=function(t){var e,r=a.parseMLine(t),n=a.matchPrefix(t,"a=max-message-size:");n.length>0&&(e=parseInt(n[0].substr(19),10)),isNaN(e)&&(e=65536);var s=a.matchPrefix(t,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:r.fmt,maxMessageSize:e};var i=a.matchPrefix(t,"a=sctpmap:");if(i.length>0){var o=a.matchPrefix(t,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:e}}},a.writeSctpDescription=function(t,e){var r=[];return r="DTLS/SCTP"!==t.protocol?["m="+t.kind+" 9 "+t.protocol+" "+e.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+e.port+"\r\n"]:["m="+t.kind+" 9 "+t.protocol+" "+e.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+e.port+" "+e.protocol+" 65535\r\n"],void 0!==e.maxMessageSize&&r.push("a=max-message-size:"+e.maxMessageSize+"\r\n"),r.join("")},a.generateSessionId=function(){return Math.random().toString().substr(2,21)},a.writeSessionBoilerplate=function(t,e,r){var n,s=void 0!==e?e:2;n=t||a.generateSessionId();var i=r||"thisisadapterortc";return"v=0\r\no="+i+" "+n+" "+s+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},a.writeMediaSection=function(t,e,r,n){var s=a.writeRtpDescription(t.kind,e);if(s+=a.writeIceParameters(t.iceGatherer.getLocalParameters()),s+=a.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),s+="a=mid:"+t.mid+"\r\n",t.direction?s+="a="+t.direction+"\r\n":t.rtpSender&&t.rtpReceiver?s+="a=sendrecv\r\n":t.rtpSender?s+="a=sendonly\r\n":t.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",t.rtpSender){var i="msid:"+n.id+" "+t.rtpSender.track.id+"\r\n";s+="a="+i,s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+i,t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+i,s+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+a.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+a.localCName+"\r\n"),s},a.getDirection=function(t,e){for(var r=a.splitLines(t),n=0;n<r.length;n++)switch(r[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[n].substr(2);default:}return e?a.getDirection(e):"sendrecv"},a.getKind=function(t){var e=a.splitLines(t),r=e[0].split(" ");return r[0].substr(2)},a.isRejected=function(t){return"0"===t.split(" ",2)[1]},a.parseMLine=function(t){var e=a.splitLines(t),r=e[0].substr(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},a.parseOLine=function(t){var e=a.matchPrefix(t,"o=")[0],r=e.substr(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},a.isValidSDP=function(t){if("string"!==typeof t||0===t.length)return!1;for(var e=a.splitLines(t),r=0;r<e.length;r++)if(e[r].length<2||"="!==e[r].charAt(1))return!1;return!0},t.exports=a}}]);
//# sourceMappingURL=VideoModule.47f5eec9.js.map