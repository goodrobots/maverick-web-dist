(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ConfigConnections"],{e5c6:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-data-iterator",{attrs:{items:t.items,"item-key":"key","hide-default-footer":"","single-expand":t.expand},scopedSlots:t._u([{key:"header",fn:function(){return[n("v-toolbar",{staticClass:"mb-1",attrs:{color:"primary lighten-1",dense:""}},[n("v-toolbar-title",[t._v("API Connections")]),n("v-spacer"),n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-plus-box")]),n("span",[t._v("Add API Connection")])],1)],1)]},proxy:!0},{key:"no-data",fn:function(){return[n("v-alert",{staticClass:"ma-8",attrs:{border:"left",outlined:"",type:"info",color:"primary"}},[n("span",[t._v("No API Connections are defined."),n("v-btn",{staticClass:"ml-2",attrs:{color:t.navColor+" darken-2",small:""},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[n("span",[t._v("Add API Connection")])])],1)])]},proxy:!0},{key:"default",fn:function(e){var i=e.items,o=e.isExpanded,a=e.expand;return[n("v-row",t._l(i,(function(e){return n("v-col",{key:e.key,attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[n("v-card",[n("v-toolbar",{attrs:{dense:""}},[n("v-toolbar-title",[n("span",[t._v(t._s(e.name))]),t.isApiReady(e.key)?n("v-chip",{staticClass:"ma-2",attrs:{color:"success",small:""}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-check-circle")]),n("span",[t._v("Connected")])],1):n("v-chip",{staticClass:"ma-2",attrs:{color:"error",small:""}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-alert-circle")]),n("span",[t._v("Not Connected")])],1)],1),n("v-spacer"),n("v-switch",{staticClass:"mt-4",attrs:{color:t.navColor,"input-value":o(e),label:o(e)?"Editing":"Edit"},on:{change:function(t){return a(e,t)}}})],1)],1),o(e)?n("v-row",[n("v-container",{staticClass:"mt-0 pt-0",attrs:{fluid:""}},[n("v-card",[n("v-row",[n("v-col",{staticClass:"pt-0 pr-1",attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[n("v-list",{attrs:{dense:""}},[n("v-list-item",[n("v-list-item-content",[n("v-text-field",{attrs:{label:"API Name/Description"},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"item.name"}})],1)],1),n("v-list-item",[n("v-list-item-content",[n("v-text-field",{attrs:{label:"GraphQL Endpoint"},model:{value:e.httpEndpoint,callback:function(n){t.$set(e,"httpEndpoint",n)},expression:"item.httpEndpoint"}})],1)],1),n("v-list-item",[n("v-list-item-content",[n("v-text-field",{attrs:{label:"Encrypted GraphQL Endpoint"},model:{value:e.httpsEndpoint,callback:function(n){t.$set(e,"httpsEndpoint",n)},expression:"item.httpsEndpoint"}})],1)],1),n("v-list-item",[n("v-list-item-content",[n("v-text-field",{attrs:{label:"Websockets Endpoint"},model:{value:e.wsEndpoint,callback:function(n){t.$set(e,"wsEndpoint",n)},expression:"item.wsEndpoint"}})],1)],1),n("v-list-item",[n("v-list-item-content",[n("v-text-field",{attrs:{label:"Encrypted Websockets Endpoint"},model:{value:e.wssEndpoint,callback:function(n){t.$set(e,"wssEndpoint",n)},expression:"item.wssEndpoint"}})],1)],1),n("v-list-item",[n("v-list-item-content",[n("v-text-field",{attrs:{label:"Schema Endpoint"},model:{value:e.schemaEndpoint,callback:function(n){t.$set(e,"schemaEndpoint",n)},expression:"item.schemaEndpoint"}})],1)],1),n("v-list-item",[n("v-list-item-content",[n("v-text-field",{attrs:{label:"Encrypted Schema Endpoint"},model:{value:e.schemasEndpoint,callback:function(n){t.$set(e,"schemasEndpoint",n)},expression:"item.schemasEndpoint"}})],1)],1),n("v-list-item",[n("v-btn",{attrs:{color:"success"},on:{click:function(n){return t.save(e)}}},[t._v("Save")]),n("v-btn",{staticClass:"ml-2",attrs:{color:"blue"},on:{click:function(n){return t.connect(e)}}},[t._v("Connect")]),n("v-spacer"),n("v-btn",{attrs:{color:"error"},on:{click:function(n){return t.remove(e)}}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-delete")]),n("span",[t._v("Delete")])],1)],1)],1)],1),n("v-col",{staticClass:"pt-0 pl-1",attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[n("v-list",{attrs:{dense:""}},[n("v-list-item",[n("v-list-item-content",[t._v("API Unique ID")]),n("v-list-item-content",[t.apistate[e.key].uuid?n("span",{staticClass:"success--text text--lighten-1"},[t._v(t._s(t.apistate[e.key].uuid))]):n("v-icon",{attrs:{color:"error"}},[t._v("mdi-alert-circle-outline")])],1)],1),n("v-list-item",[n("v-list-item-content",[t._v("API Last Seen")]),n("v-list-item-content",[t.lastseen(e.key)<60?n("span",{staticClass:"success--text text--lighten-1"},[t._v(t._s(t.lastseen(e.key).toFixed(2))+" seconds ago")]):n("span",{staticClass:"error--text text--lighten-1"},[t._v(t._s(t.lastseen(e.key).toFixed(2))+" seconds ago")])])],1),n("v-list-item",[n("v-list-item-content",[t._v("API Connection State")]),n("v-list-item-content",[t.apistate[e.key].state?n("v-icon",{attrs:{color:"success"}},[t._v("mdi-check-circle-outline")]):n("v-icon",{attrs:{color:"error"}},[t._v("mdi-alert-circle-outline")])],1)],1),n("v-list-item",[n("v-list-item-content",[t._v("API Schema Ready")]),n("v-list-item-content",[t.apistate[e.key].schemaready?n("v-icon",{attrs:{color:"success"}},[t._v("mdi-check-circle-outline")]):n("v-icon",{attrs:{color:"error"}},[t._v("mdi-alert-circle-outline")])],1)],1),n("v-list-item",[n("v-list-item-content",[t._v("Authentication Set")]),n("v-list-item-content",[t.apistate[e.key].auth?n("v-icon",{attrs:{color:"success"}},[t._v("mdi-check-circle-outline")]):n("v-icon",{attrs:{color:"error"}},[t._v("mdi-alert-circle-outline")])],1)],1),n("v-list-item",[n("v-list-item-content",[t._v("Icon Set")]),n("v-list-item-content",[t._v(t._s(t.apistate[e.key].icon)),t.apistate[e.key].icon?n("v-icon",{attrs:{color:"success"}},[t._v(t._s(t.apistate[e.key].icon))]):n("v-icon",{attrs:{color:"error"}},[t._v("mdi-alert-circle-outline")])],1)],1)],1),n("v-divider")],1)],1)],1)],1)],1):t._e()],1)})),1)]}}])}),n("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline primary",attrs:{"primary-title":""}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-plus-box")]),n("span",[t._v("Add API Connection")])],1),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"API Key (Short)",required:""},model:{value:t.newitem.key,callback:function(e){t.$set(t.newitem,"key",e)},expression:"newitem.key"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{attrs:{label:"API Name/Description",required:""},model:{value:t.newitem.name,callback:function(e){t.$set(t.newitem,"name",e)},expression:"newitem.name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{attrs:{label:"Hostname (FQDN) / IP Address",required:""},model:{value:t.newitem.hostname,callback:function(e){t.$set(t.newitem,"hostname",e)},expression:"newitem.hostname"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{attrs:{label:"Port",required:""},model:{value:t.newitem.port,callback:function(e){t.$set(t.newitem,"port",e)},expression:"newitem.port"}})],1)],1)],1)],1),n("v-card-actions",[n("v-btn",{staticClass:"ma-2",attrs:{color:"success"},on:{click:function(e){return t.createConnection()}}},[t._v("Create Connection")]),n("v-btn",{staticClass:"ma-2",attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")])],1)],1)],1),t.deleteitem?n("v-dialog",{attrs:{"max-width":"400"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline error--text"},[t._v("Delete Connection: "),n("strong",[t._v(t._s(t.deleteitem.key))]),t._v("?")])]),n("v-card-text",[n("h3",[t._v(t._s(t.deleteitem.name))]),n("div",[t._v("Are you sure you want to delete this API connection?")])]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(e){t.deleteDialog=!1}}},[t._v("Cancel")]),n("v-btn",{attrs:{text:"",color:"error darken-1"},on:{click:function(e){return t.removeConnection()}}},[t._v("Delete")])],1)],1)],1):t._e()],1)},o=[],a=(n("99af"),n("b0c0"),n("b64b"),n("d3b7"),n("07ac"),n("2532"),n("96cf"),n("1da1")),s={name:"ConfigConnections",components:{},data:function(){return{search:"",filter:{},dialog:!1,deleteDialog:!1,newitem:{},deleteitem:null,expand:!0}},computed:{items:function(){return Object.values(this.apis)}},mounted:function(){for(var t=0,e=Object.keys(this.apis);t<e.length;t++)e[t]},methods:{connect:function(t){this.logDebug("Connecting: "+t.key),this.$apollo.provider.clients[t.key]||this.createClient(t.key,this.apis[t.key])},createConnection:function(){this.dialog=!1,this.logDebug("Creating new connection: "+this.newitem.key);var t="http:",e=t.includes("https")?"wss:":"ws:",n={key:this.newitem.key,httpEndpoint:"".concat(t,"//").concat(this.newitem.hostname,":").concat(this.newitem.port,"/graphql"),wsEndpoint:"".concat(e,"//").concat(this.newitem.hostname,":").concat(this.newitem.port,"/subscriptions"),schemaEndpoint:"".concat(t,"//").concat(this.newitem.hostname,":").concat(this.newitem.port,"/schema"),websocketsOnly:!1,name:this.newitem.name,colorLight:"rgba(166,11,11,0.3)",colorDark:"rgba(166,11,11,0.9)",authToken:null};this.$store.commit("data/addApi",{key:n.key,data:n})},lastseen:function(t){var e=this.$store.state.core.apiSeen.hasOwnProperty(t)?this.$store.state.core.apiSeen[t]:0;return performance.now()-e},remove:function(t){this.deleteitem=t,this.deleteDialog=!0},removeConnection:function(){this.logDebug("Deleting connection:"+this.deleteitem.key),this.logDebug(this.activeApi),this.deleteitem.key==this.activeApi&&(this.logDebug("Unsetting active connection"),this.$store.commit("data/setActiveApi",null)),delete this.$apollo.provider.clients[this.deleteitem.key],this.$store.commit("data/removeApi",this.deleteitem.key),this.deleteitem=null},save:function(t){this.$store.commit("data/setApiData",{api:t.key,data:t})},testSsl:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,o,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=function(t){return new Promise((function(e,n){var i=new Image;i.addEventListener("load",(function(){return e(i)})),i.addEventListener("error",(function(t){return n(t)})),i.src=t}))},o=e.apis[t],a=null,s=i("https://".concat(o.hostname,"/img/misc/onepixel.png")).then((function(t){a=!0})).catch((function(t){e.logDebug("Error loading https image"),a=!1})),n.next=6,s;case 6:e.logDebug("SSL state for ".concat(o.name,": ").concat(a));case 7:case"end":return n.stop()}}),n)})))()}}},c=s,l=n("2877"),r=n("6544"),d=n.n(r),v=n("0798"),m=n("8336"),p=n("b0af"),u=n("99d9"),h=n("cc20"),f=n("62ad"),k=n("a523"),b=n("c377"),g=n("169a"),w=n("ce7e"),_=n("132d"),y=n("8860"),x=n("da13"),C=n("5d23"),E=n("0fd9"),A=n("2fa4"),D=n("b73d"),V=n("8654"),I=n("71d9"),$=n("2a7f"),P=Object(l["a"])(c,i,o,!1,null,null,null);e["default"]=P.exports;d()(P,{VAlert:v["a"],VBtn:m["a"],VCard:p["a"],VCardActions:u["a"],VCardText:u["c"],VCardTitle:u["d"],VChip:h["a"],VCol:f["a"],VContainer:k["a"],VDataIterator:b["a"],VDialog:g["a"],VDivider:w["a"],VIcon:_["a"],VList:y["a"],VListItem:x["a"],VListItemContent:C["a"],VRow:E["a"],VSpacer:A["a"],VSwitch:D["a"],VTextField:V["a"],VToolbar:I["a"],VToolbarTitle:$["b"]})}}]);
//# sourceMappingURL=ConfigConnections.c74c1253.js.map